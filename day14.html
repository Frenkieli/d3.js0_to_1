<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="http://d3js.org/d3.v3.min.js"></script>
</head>

<body>
  <script>
    d3.csv("svg-d3-13-csv.csv", function (d) {
      return {
        '性別': d.sex,
        '姓名': d.name,
        '分數': +d.score    // 把他變成數字類型
      };
    }, function (error, rows) {
      if (error) {
        console.log('oh no');
      }
      else {
        console.log(rows);
        console.log('===================================================');
      }
    });

    d3.text("svg-d3-13-csv2.csv", function (data) {
      console.log(data);
      var parsedCSV = d3.csv.parseRows(data);
      console.log(parsedCSV);
      var a = parsedCSV.map(function (d) {
        return {
          name: d[1],
          score: d[3],
          sex: d[5]
        }
      });
      console.log(a);
      console.log('===================================================');
    });

    d3.csv("svg-d3-13-csv.csv", function (d) {
      return {
        '性別': d.sex,
        '姓名': d.name,
        '分數': +d.score    // 把他變成數字類型
      };
    }, function (error, rows) {
      if (error) {
        console.log('oh no');
      }
      else {
        console.log(rows,'CSV2');
        console.log('===================================================');
      }
    });

    setTimeout(() => {

      console.log(d3.csv.format([
        { name: "Bill", score: '80', sex: 'male' },
        { name: "Jean", score: '78', sex: 'female' },
        { name: "Owen", score: '92', sex: 'male' }
      ]));

      //name,score,sex
      //Bill,80,male
      //Jean,78,female
      //Owen,92,male

      console.log(d3.csv.formatRows([
        ["Bill", '80', 'male'],
        ["Jean", '78', 'female'],
        ["Owen", '92', 'male']
      ]));

      //Bill,80,male
      //Jean,78,female
      //Owen,92,male

      console.log('===================================================');
    }, 100);
  </script>
</body>

</html>